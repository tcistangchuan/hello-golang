- 新增操作，数据表建立唯一索引，防止增加重复数据

- 修改操作，innodb 表在 update table_name set status = 新状态  where id=xx and status = 前置状态 ，因为 数据库在update 会自动加写锁，不会导致并发问题

- Redis 分布式锁(在分布式系统环境下，一个方法在同一时间只能被一个机器的一个线程执行)

  ```
  加锁命令：SETNX key value，当键不存在时，对键进行设置操作并返回成功，否则返回失败。KEY 是锁的唯一标识，一般按业务来决定命名。
  解锁命令：DEL key，通过删除键值对释放锁，以便其他线程可以通过 SETNX 命令来获取锁。
  锁超时：EXPIRE key timeout, 设置 key 的超时时间，以保证即使锁没有被显式释放，锁也可以在一定时间后自动释放，避免资源被永远锁住。
  
  则加锁解锁伪代码如下：
  if (setnx(key, 1) == 1){
      expire(key, 300)
      try {
          //TODO 业务逻辑
          del(key)
      } catch {
          del(key)
      }
  }
  ```

